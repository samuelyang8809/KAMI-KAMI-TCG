<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>寶可夢卡磚專賣店</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans TC', sans-serif; margin: 0; background: #f6f6f6; color: #333; }
    header { background: #2c3e50; color: white; padding: 1em; text-align: center; }
    .category-bar-wrapper { display: flex; align-items: center; background: #fff; padding: 0.5em; border-bottom: 1px solid #ccc; }
    .category-bar { display: flex; overflow-x: auto; flex: 1; gap: 10px; white-space: nowrap; }
    .category-bar span { background: #fff; padding: 0.5em 1em; border-radius: 20px; border: 1px solid #ccc; cursor: pointer; }
    .category-bar span.active { background: orange; color: white; }
    .container { max-width: 1200px; margin: auto; padding: 2em 1em; }
    .grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* 每列固定兩欄 */
  gap: 1em;
}    .card { background: #fff; border-radius: 10px; padding: 1em; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
    .card img { width: 90%; border-radius: 6px; object-fit: cover; }
    .price { color: #e67e22; font-weight: bold; margin: 0.5em 0; }
    .fixed-bottom-bar { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; display: flex; justify-content: space-around; padding: 0.5em; box-shadow: 0 -2px 5px rgba(0,0,0,0.1); z-index: 1000; }
    .fixed-bottom-bar button { flex: 1; margin: 0 0.5em; padding: 0.5em; border-radius: 999px; font-weight: bold; background: gray; color: white; border: none; }
    .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6); align-items: center; justify-content: center; z-index: 10001; }
    .modal.show { display: flex; }
    .modal-content { background: #fff; padding: 1.5em; border-radius: 10px; width: 90%; max-width: 400px; text-align: center; position: relative; }
    .modal-content img { width: 100%; border-radius: 8px; margin-bottom: 1em; }
    .close { position: absolute; top: 10px; right: 15px; font-size: 1.5em; cursor: pointer; }
    select, .modal-content button { width: 100%; padding: 0.7em; margin-top: 1em; border-radius: 5px; border: none; }
    .modal-content button { background-color: #27ae60; color: white; font-weight: bold; cursor: pointer; }
  </style>
</head>
<body>
<header>
  <h1>寶可夢卡磚專賣店</h1>
</header>
<div class="category-bar-wrapper">
  <div class="category-bar" id="categoryBar"></div>
</div>
<div class="container" >
  <h4 id="current-category">介紹</h2>
  <div class="grid" id="productGrid"></div>
</div>
<div class="modal" id="variantModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">✕</span>
    <h3 id="modalTitle"></h3>
    <img id="modalImage" src="" alt="">
    <div class="price" id="modalPrice"></div>
    <select id="variantSelect" onchange="changeVariantInfo()"></select>
    <button onclick="addToCart()">加入購物車</button>
  </div>
</div>
<div class="fixed-bottom-bar">
  <button onclick="goToIntro()" id="introBtn" style="display:none; background: orange;">其他周邊・卡磚</button>
  <button id="cartButton" onclick="toggleCartList()">購物車 (0)</button>
</div>
<script>
  const categoryBar = document.getElementById('categoryBar');
  const productGrid = document.getElementById('productGrid');
  const modal = document.getElementById('variantModal');
  const modalTitle = document.getElementById('modalTitle');
  const modalImage = document.getElementById('modalImage');
  const modalPrice = document.getElementById('modalPrice');
  const variantSelect = document.getElementById('variantSelect');
  const cartButton = document.getElementById('cartButton');
  
  let currentVariants = [];
  let currentItem = {};
  let cart = [];
  
  const data = {
    "商品大項": [
      ...[
        "太晶慶典-伊布", "皮卡丘系列", "噴火龍系列", "奇樹系列", "莉莉艾系列",
        "151系列", "熱門V&Vmax系列", "SV9對戰夥伴", "SV8超電/太晶", "SV7龍騰/星晶",
        "SV6變幻假面", "SV5緋紅/異度狂野", "SV4a 閃色寶藏", "SV3 黯炎/激狂",
        "SV2 碟旋/冰雪", "SV1 朱紫/音爆", "Vstar天地萬物", "伊布英雄系列"
      ].map(cat => ({
        "商品大項名稱": cat,
        "商品大項圖片": `https://placehold.co/600x400?text=${encodeURIComponent(cat)}`,
        "小項價格範圍": "$100–$300",
        "商品小項": [
          { "商品小項名稱": `${cat} Demo商品1`, "商品小項價格": 100, "商品小項圖片": `https://placehold.co/300x400?text=${encodeURIComponent(cat)}+Demo1` },
          { "商品小項名稱": `${cat} Demo商品2`, "商品小項價格": 150, "商品小項圖片": `https://placehold.co/300x400?text=${encodeURIComponent(cat)}+Demo2` },
          { "商品小項名稱": `${cat} Demo商品3`, "商品小項價格": 200, "商品小項圖片": `https://placehold.co/300x400?text=${encodeURIComponent(cat)}+Demo3` }
        ]
      }))
    ]
  };
  
  function loadCategories() {
    const introSpan = document.createElement('span');
    introSpan.textContent = '介紹';
    introSpan.onclick = goToIntro;
    categoryBar.appendChild(introSpan);
  
    data.商品大項.forEach(cat => {
      const span = document.createElement('span');
      span.textContent = cat.商品大項名稱;
      span.onclick = () => renderCategory(cat);
      categoryBar.appendChild(span);
    });
  }
  
  function renderCategory(category) {
    document.getElementById('current-category').innerText = category.商品大項名稱;
    document.querySelectorAll('.category-bar span').forEach(s => s.classList.remove('active'));
    [...categoryBar.children].forEach(s => {
      if (s.textContent === category.商品大項名稱) s.classList.add('active');
    });
    productGrid.innerHTML = '';
    category.商品小項.forEach((item) => {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerHTML = `
        <img src="${item.商品小項圖片}" alt="${item.商品小項名稱}" style="border: 4px solid black; border-radius: 10px;">
        <h4>${item.商品小項名稱}</h4>
        <div style="color: gray; font-size: 0.9em;">選擇款式</div>
        <div class="price">$${item.商品小項價格}–680</div>
        <button onclick='openVariantModal(${JSON.stringify(category)}, ${JSON.stringify(item)})'>選擇款式</button>
      `;
      productGrid.appendChild(div);
    });
    document.getElementById('introBtn').style.display = 'inline-block';
  }
  
  function openVariantModal(category, item) {
    currentVariants = category.商品小項;
    currentItem = item;
    modal.classList.add('show');
    updateModal(item);
    variantSelect.innerHTML = '';
    currentVariants.forEach((variant, idx) => {
      const opt = document.createElement('option');
      opt.value = idx;
      opt.textContent = variant.商品小項名稱;
      if (variant.商品小項名稱 === item.商品小項名稱) opt.selected = true;
      variantSelect.appendChild(opt);
    });
  }
  
  function updateModal(item) {
    modalTitle.innerText = item.商品小項名稱;
    modalImage.src = item.商品小項圖片;
    modalPrice.innerText = `$${item.商品小項價格}`;
  }
  
  function changeVariantInfo() {
    const idx = variantSelect.value;
    const selected = currentVariants[idx];
    currentItem = selected;
    updateModal(selected);
  }
  
  function closeModal() {
    modal.classList.remove('show');
  }
  
  function addToCart() {
    cart.push(currentItem);
    cartButton.innerText = `購物車 (${cart.length})`;
    alert(`已加入購物車：${currentItem.商品小項名稱}`);
    closeModal();
  }
  
  function goToIntro() {
    document.getElementById('current-category').innerText = '介紹';
    productGrid.innerHTML = `
      <div class='card'><img src='https://placehold.co/300x400?text=擴散式卡磚'><h4>擴散式卡磚</h4></div>
      <div class='card'><img src='https://placehold.co/300x400?text=擴散式鑑定卡殼'><h4>擴散式鑑定卡殼</h4></div>
      <div class='card'><img src='https://placehold.co/300x400?text=卡牌周邊'><h4>卡牌周邊</h4></div>
    `;
    document.querySelectorAll('.category-bar span').forEach(s => s.classList.remove('active'));
    categoryBar.children[0].classList.add('active');
    document.getElementById('introBtn').style.display = 'none';
  }
  
  function toggleCartList() {
    alert(`目前購物車有 ${cart.length} 項商品`);
  }
  
  loadCategories();
  goToIntro();
  </script>
  
</body>
</html>
